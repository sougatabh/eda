datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot2.png", width=480, height=480)
plot(datetime, globalActivePower, type="l", xlab="", ylab="Global Active Power (kilowatts)")
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
globalActivePower <- as.numeric(df$Global_active_power)
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot2.png", width=480, height=480)
plot(datetime, globalActivePower, type="l", xlab="", ylab="Global Active Power (kilowatts)")
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
subMetering1 <- as.numeric(df$Sub_metering_1)
subMetering2 <- as.numeric(df$Sub_metering_2)
subMetering3 <- as.numeric(df$Sub_metering_3)
#Data time Conversion
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot3.png", width=480, height=480)
plot(datetime, subMetering1, type="l", ylab="Energy Submetering", xlab="")
lines(datetime, subMetering2, type="l", col="red")
lines(datetime, subMetering3, type="l", col="blue")
legend("topright", c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"), lty=1, lwd=2.5, col=c("black", "red", "blue"))
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
globalReactivePower <- as.numeric(df$Global_reactive_power)
voltage <- as.numeric(df$Voltage)
subMetering1 <- as.numeric(df$Sub_metering_1)
subMetering2 <- as.numeric(df$Sub_metering_2)
subMetering3 <- as.numeric(df$Sub_metering_3)
#Data time Conversion
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot4.png", width=480, height=480)
par(mfrow = c(2, 2))
# 1st plot
plot(datetime, globalActivePower, type="l", xlab="", ylab="Global Active Power", cex=0.2)
# 2nd plot
plot(datetime, voltage, type="l", xlab="datetime", ylab="Voltage")
# 3rd plot
plot(datetime, subMetering1, type="l", ylab="Energy Submetering", xlab="")
lines(datetime, subMetering2, type="l", col="red")
lines(datetime, subMetering3, type="l", col="blue")
legend("topright", c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"), lty=, lwd=2.5, col=c("black", "red", "blue"), bty="o")
# 4th plot
plot(datetime, globalReactivePower, type="l", xlab="datetime", ylab="Global_reactive_power", cex=0.2)
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("data/household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#summary(df)
#Filter only Data for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
globalActivePower <- as.numeric(df$Global_active_power)
png("plot1.png", width=480, height=480)
hist(globalActivePower, col="red", main="Global Active Power", xlab="Global Active Power (kilowatts)")
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("data/household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
globalActivePower <- as.numeric(df$Global_active_power)
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot2.png", width=480, height=480)
plot(datetime, globalActivePower, type="l", xlab="", ylab="Global Active Power (kilowatts)")
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("data/household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
subMetering1 <- as.numeric(df$Sub_metering_1)
subMetering2 <- as.numeric(df$Sub_metering_2)
subMetering3 <- as.numeric(df$Sub_metering_3)
#Data time Conversion
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot3.png", width=480, height=480)
plot(datetime, subMetering1, type="l", ylab="Energy Submetering", xlab="")
lines(datetime, subMetering2, type="l", col="red")
lines(datetime, subMetering3, type="l", col="blue")
legend("topright", c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"), lty=1, lwd=2.5, col=c("black", "red", "blue"))
dev.off()
library(data.table)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/course4/ExData_Plotting1')
#Reads in data from file then subsets data for specified dates
df <- read.table("data/household_power_consumption.txt", header= TRUE, sep=";", stringsAsFactors=FALSE, dec=".")
#Filter only Date for given Date
df <-df[df$Date %in% c('1/2/2007',"2/2/2007"),]
globalReactivePower <- as.numeric(df$Global_reactive_power)
voltage <- as.numeric(df$Voltage)
subMetering1 <- as.numeric(df$Sub_metering_1)
subMetering2 <- as.numeric(df$Sub_metering_2)
subMetering3 <- as.numeric(df$Sub_metering_3)
#Data time Conversion
datetime <- strptime(paste(df$Date, df$Time, sep=" "), "%d/%m/%Y %H:%M:%S")
png("plot4.png", width=480, height=480)
par(mfrow = c(2, 2))
# 1st plot
plot(datetime, globalActivePower, type="l", xlab="", ylab="Global Active Power", cex=0.2)
# 2nd plot
plot(datetime, voltage, type="l", xlab="datetime", ylab="Voltage")
# 3rd plot
plot(datetime, subMetering1, type="l", ylab="Energy Submetering", xlab="")
lines(datetime, subMetering2, type="l", col="red")
lines(datetime, subMetering3, type="l", col="blue")
legend("topright", c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"), lty=, lwd=2.5, col=c("black", "red", "blue"), bty="o")
# 4th plot
plot(datetime, globalReactivePower, type="l", xlab="datetime", ylab="Global_reactive_power", cex=0.2)
dev.off()
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/data-science/')
pm0 <- read.table('RD_501_88101_1999-0.txt',comment.char = '#',header = FALSE,sep ='|',na.strings = "")
head(pm0)
cnames <- readLines('RD_501_88101_1999-0.txt',1)
cnames <- strsplit(cnames,'|',fixed = TRUE)
names(pm0) <-cnames[[1]]
x0 <-pm0$`Sample Value`
class(x0)
str(x0)
summary(x0)
mean(is.na(x0))
pm1 <- read.table('RD_501_88101_2012-0.txt',comment.char = '#',header = FALSE,sep='|',na.strings = "")
names(pm1) <- make.names(cnames[[1]])
x1 <- pm1$Sample.Value
boxplot(x0,x1)
boxplot(log10(x0),log10(x1))
summary(x1)
nagatives <- x1<0
str(nagatives)
sum(nagatives,na.rm = TRUE)
dates <- pm1$Date
dates <- as.Date(as.character(dates),'%Y%m%d')
dates
hist(dates,"month")
hist(dates[nagatives],"month")
site0 <- unique(subset(pm0,State.Code=36,c(County.Code,Site.ID)))
head(pm0)
print(site0)
site0 <- unique(subset(pm0,State.Code=36,c("County Code","Site ID")))
site1 <- unique(subset(pm1,State.Code=36,c("County Code","Site ID")))
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/data-science/')
pm0 <- read.table('RD_501_88101_1999-0.txt',comment.char = '#',header = FALSE,sep ='|',na.strings = "")
head(pm0)
cnames <- readLines('RD_501_88101_1999-0.txt',1)
cnames <- strsplit(cnames,'|',fixed = TRUE)
names(pm0) <-cnames[[1]]
names(pm0) <- make.names(cnames[1])
x0 <-pm0$`Sample Value`
class(x0)
str(x0)
summary(x0)
mean(is.na(x0))
pm1 <- read.table('RD_501_88101_2012-0.txt',comment.char = '#',header = FALSE,sep='|',na.strings = "")
names(pm1) <- make.names(cnames[[1]])
x1 <- pm1$Sample.Value
boxplot(x0,x1)
boxplot(log10(x0),log10(x1))
summary(x1)
nagatives <- x1<0
str(nagatives)
sum(nagatives,na.rm = TRUE)
dates <- pm1$Date
dates <- as.Date(as.character(dates),'%Y%m%d')
dates
hist(dates,"month")
hist(dates[nagatives],"month")
head(pm0)
site0 <- unique(subset(pm0,State.Code=36,c(County.Code,Site.ID)))
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/data-science/')
pm0 <- read.table('RD_501_88101_1999-0.txt',comment.char = '#',header = FALSE,sep ='|',na.strings = "")
head(pm0)
cnames <- readLines('RD_501_88101_1999-0.txt',1)
cnames <- strsplit(cnames,'|',fixed = TRUE)
names(pm0) <-cnames[[1]]
names(pm0) <- make.names(cnames[[1]])
head(pm0)
pm1 <- read.table('RD_501_88101_2012-0.txt',comment.char = '#',header = FALSE,sep='|',na.strings = "")
names(pm1) <- make.names(cnames[[1]])
x1 <- pm1$Sample.Value
boxplot(x0,x1)
x0 <- pm0$Sample.Value
boxplot(log10(x0),log10(x1))
nagatives <- x1<0
str(nagatives)
sum(nagatives,na.rm = TRUE)
dates <- pm1$Date
dates <- as.Date(as.character(dates),'%Y%m%d')
dates
hist(dates,"month")
hist(dates[nagatives],"month")
head(pm0)
site0 <- unique(subset(pm0,State.Code=36,c(County.Code,Site.ID)))
site0 <- unique(subset(pm0,State.Code==36,c(County.Code,Site.ID)))
site1 <- unique(subset(pm1,State.Code==36,c(County.Code,Site.ID)))
print(site0)
site0<-paste(site0[,1],site0[,2],sep='|')
site1<-paste(site1[,1],site1[,2],sep='|')
both <- intersect(site0,site1)
both
pm0$county.site <- with(pm0, paste(County.Code,Site.ID,sep='.'))
pm1$county.site <- with(pm1, paste(County.Code,Site.ID,sep='.'))
site0<-paste(site0[,1],site0[,2],sep='.')
site1<-paste(site1[,1],site1[,2],sep='.')
both <- intersect(site0,site1)
site0 <- unique(subset(pm0,State.Code==36,c(County.Code,Site.ID)))
site1 <- unique(subset(pm1,State.Code==36,c(County.Code,Site.ID)))
site0<-paste(site0[,1],site0[,2],sep='.')
site1<-paste(site1[,1],site1[,2],sep='.')
both <- intersect(site0,site1)
cnt0 <- subset(pm0,State.Code == 36 & county.site %in% both)
cnt1 <- subset(pm1,State.Code == 36 & county.site %in% both)
head(cnt0)
split(cnt0,cnt0$county.site)
spply(split(cnt0,cnt0$county.site),nrow)
sapply(split(cnt0,cnt0$county.site),nrow)
sapply(split(cnt1,cnt1$county.site),nrow)
pm1sub <- subset(pm1, State.Code == 36 & County.Code == 63 & Site.ID == 2008)
pm0sub <- subset(pm0, State.Code == 36 & County.Code == 63 & Site.ID == 2008)
dim(pm1sub)
dim(pm0sub)
dates0 <-pm0sub$Date
x0sub <- pm0sub$Sample.Value
dates1 <- as.Date(as.character(dates1),'%Y%m%d')
dates1 <-pm1sub$Date
x1sub <- pm1sub$Sample.Value
dates0 <-pm0sub$Date
x0sub <- pm0sub$Sample.Value
dates1 <- as.Date(as.character(dates1),'%Y%m%d')
plot(dates1,x1sub)
dates0 <- as.Date(as.character(dates0),'%Y%m%d')
plot(dates0,x0sub)
par(mfrow = c(1,2), mar=c(4,4,2,1))
plot(dates0,x0sub,pch=2)
plot(dates1,x1sub,pch=20)
range(x0sub,x1sub,na.rm=T)
rng <- range(x0sub,x1sub,na.rm=T)
par(mfrow = c(1,2))
plot(dates0,x0sub,ylim = rng)
plot(dates1,x1sub,ylim = rng)
mn0 <- with(pm0,tapply(Sample.Value, Sample.Code, mean,na.rm = T))
mn1 <- with(pm1,tapply(Sample.Value, Sample.Code, mean,na.rm = T))
mn0 <- with(pm0,tapply(Sample.Value, State.Code, mean,na.rm = T))
mn1 <- with(pm1,tapply(Sample.Value, State.Code, mean,na.rm = T))
mn0
summary(mn0)
d0 <- data.frame(state = names(mn0),mean = mn0)
d1 <- data.frame(state = names(mn1),mean = mn1)
d0
mrg <- merge(d0,d1, by = 'state')
head(mrg)
par(mfrow = c(1,1))
with(mrg,plot(rep(1999,52),mrg[,2],xlim = c(1998,2013)))
with(mrg,points(rep(2012,52),mrg[,3]))
segments(rep(1999,52),mrg[,2],rep(2012,52),mrg[,3])
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
data <- read.table('exdata_data_NEI_data/Source_Classification_Code.rds')
data <- readRDS('exdata_data_NEI_data/Source_Classification_Code.rds')
head(data)
NEI_data <- readRDS('exdata_data_NEI_data/Source_Classification_Code.rds')
head(NEI_data)
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
head(SCC_data)
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
head(NEI_data)
library(ggplot2)
library(plyr)
install.packages('ggplot2')
library(ggplot2)
library(plyr)
columns <- c('year','type','Pollutant',,'SCC','fips')
selcolumns <-c("year","type","Pollutant","SCC,"fips"")
selcolumns <-c("year","type","Pollutant","SCC,"fips)
NEI_data[,selcolumns] <- lapply(NEI[,selcolumns], factor)
NEI_data[,selcolumns] <- lapply(NEI_data[,selcolumns], factor)
selcolumns <-c("year","type","Pollutant","SCC","fips")
NEI_data[,selcolumns] <- lapply(NEI_data[,selcolumns], factor)
head(NEI_data)
totalPm2_5 <- aggregate(Emissions ~ year,NEI_data, sum)
totalPm2_5
barplot((totalPm2_5/10^6), names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions From All US Sources by Year")
barplot((totalPm2_5)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions From All US Sources by Year")
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
head(SCC_data)
totalPm2_5 <- aggregate(Emissions ~ year,NEI_data, sum)
barplot((totalPm2_5)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions From All US Sources by Year")
barplot(
(aggTotals$totalPm2_5)/10^6,
names.arg=totalPm2_5$year,
xlab="Year",
ylab="PM2.5 Emissions (10^6 Tons)",
main="Total PM2.5 Emissions From All US Sources"
)
barplot((totalPm2_5$Emissions)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions From All US Sources by Year")
baltimore_NEI <- NEI_data[NEI_data$fips=="24510",]
totalPm2_5_baltimore <- aggregate(Emmisions ~ year,baltimore_NEI,sum)
totalPm2_5_baltimore <- aggregate(Emissions ~ year,baltimore_NEI,sum)
totalPm2_5_baltimore
barplot(totalPm2_5_baltimore$Emissions, names.arg = totalPm2_5_baltimore$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions for Baltimore  by Year")
library(ggplot2)
ggp <- ggplot(baltimore_NEI,aes(factor(year),Emissions,fill=type)) +
geom_bar(stat="identity") +
theme_bw() + guides(fill=FALSE)+
facet_grid(.~type,scales = "free",space="free") +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Tons)")) +
labs(title=expression("PM"[2.5]*" Emissions, Baltimore City 1999-2008 by Source Type"))
print(ggp)
combustion_related <- grepl("comb",SCC_data$SCC.Level.One,ignore.case = TRUE)
combustion_related <- grepl(pattern = "comb",SCC_data$SCC.Level.One,ignore.case = TRUE)
coal_related <- grepl(pattern = "coal",SCC_data$SCC.Level.Four,ignore.case = TRUE)
coal_comnustion_related <- (combustion_related,coal_related)
coal_comnustion_related <- (combustion_related & coal_related)
coal_combustion_related <- (combustion_related & coal_related)
coal_combustion_SCC_data <- SCC_data[coal_combustion_related,]$SCC
coal_combustion_SCC_data
coal_combustion <- (combustion_related & coal_related)
combustion_SCC_data <- SCC_data[coal_combustion,]$SCC
combution_NEI_data <- NEI_data[NEI_data$SCC %in% combustion_SCC_data]
combustion_related <- grepl("comb", SCC_data$SCC.Level.One, ignore.case=TRUE)
coal_related <- grepl("coal", SCC_data$SCC.Level.Four, ignore.case=TRUE)
coal_combustion <- (combustion_related & coal_related)
combustion_SCC <- SCC_data[coal_combustion,]$SCC
source('~/myspaces/course/john-hopkins/assignments/eda/exploratory_data_analysis.R', echo=TRUE)
ggp <- ggplot(combustion_NEI,aes(factor(year),Emissions/10^5)) +
geom_bar(stat="identity",fill="grey",width=0.75) +
theme_bw() +  guides(fill=FALSE) +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (10^5 Tons)")) +
labs(title=expression("PM"[2.5]*" Coal Combustion Source Emissions Across US from 1999-2008"))
print(ggp)
library(ggplot2)
ggp <- ggplot(combustion_NEI,aes(factor(year),Emissions/10^5)) +
geom_bar(stat="identity",fill="grey",width=0.75) +
theme_bw() +  guides(fill=FALSE) +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (10^5 Tons)")) +
labs(title=expression("PM"[2.5]*" Coal Combustion Source Emissions Across US from 1999-2008"))
print(ggp)
vehicles <- grepl("vehicle", SCC_data$SCC.Level.Two, ignore.case=TRUE)
vehicles_SCC <- SCC_data[vehicles,]$SCC
vehicles_NEI <- NEI_data[NEI$SCC %in% vehicles_SCC,]
vehicles_NEI <- NEI_data[NEI_data$SCC %in% vehicles_SCC,]
baltimore_vehicles_NEI <- vehicles_NEI[vehicles_NEI$fips==24510,]
ggp <- ggplot(baltimore_vehicles_NEI,aes(factor(year),Emissions)) +
geom_bar(stat="identity",fill="grey",width=0.75) +
theme_bw() +  guides(fill=FALSE) +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (10^5 Tons)")) +
labs(title=expression("PM"[2.5]*" Motor Vehicle Source Emissions in Baltimore from 1999-2008"))
print(ggp)
vehicles_baltimore_NEI <- vehicles_NEI[vehicles_NEI$fips == 24510,]
vehicles_baltimore_NEI$city <- "Baltimore City"
vehicles_LA_NEI <- vehicles_NEI[vehicles_NEI$fips=="06037",]
vehicles_LA_NEI$city <- "Los Angeles County"
both_NEI <- rbind(vehicles_baltimore_NEI,vehicles_LA_NEI)
ggp <- ggplot(both_NEI, aes(x=factor(year), y=Emissions, fill=city)) +
geom_bar(aes(fill=year),stat="identity") +
facet_grid(scales="free", space="free", .~city) +
guides(fill=FALSE) + theme_bw() +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Kilo-Tons)")) +
labs(title=expression("PM"[2.5]*" Motor Vehicle Source Emissions in Baltimore & LA, 1999-2008"))
print(ggp)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
## Question 1
#Have total emissions from PM2.5 decreased in the United States from 1999 to 2008?
#Using the base plotting system, make a plot showing the total PM2.5 emission from all sources for each of the years 1999, 2002, 2005, and 2008.
totalPm2_5 <- aggregate(Emissions ~ year,NEI_data, sum)
totalPm2_5
barplot((totalPm2_5$Emissions)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions(Mn) From All US Sources by Year")
dev.off()
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
barplot((totalPm2_5$Emissions)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions(Mn) From All US Sources by Year")
dev.off()
png("plot1.png",width=480,height=480,units="px",bg="transparent")
barplot((totalPm2_5$Emissions)/10^6, names.arg = totalPm2_5$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions(Mn) From All US Sources by Year")
dev.off()
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
## Question 2
#Have total emissions from PM2.5 decreased in the Baltimore City,
#Maryland(fips=="24510") from 1999 to 2008? Use the base plotting system to make a plot answering this question.
baltimore_NEI <- NEI_data[NEI_data$fips=="24510",]
totalPm2_5_baltimore <- aggregate(Emissions ~ year,baltimore_NEI,sum)
totalPm2_5_baltimore
png("plot2.png",width=480,height=480,units="px",bg="transparent")
barplot(totalPm2_5_baltimore$Emissions, names.arg = totalPm2_5_baltimore$year,xlab = "Year",ylab = "Emission Mn tons",
main = "Distribution of Total PM2.5 Emissions for Baltimore  by Year")
dev.off()
library(ggplot2)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
#Question 3
#Of the four types of sources indicated by the  (point, nonpoint, onroad, nonroad) variable, which of these four sources have seen decreases in emissions from 1999–2008 for Baltimore City? Which have seen increases in emissions from 1999–2008? Use the ggplot2 plotting system to make a plot answer this question.
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
baltimore_NEI <- NEI_data[NEI_data$fips=="24510",]
ggp <- ggplot(baltimore_NEI,aes(factor(year),Emissions,fill=type)) +
geom_bar(stat="identity") +
theme_bw() + guides(fill=FALSE)+
facet_grid(.~type,scales = "free",space="free") +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Tons)")) +
labs(title=expression("PM"[2.5]*" Emissions, Baltimore City 1999-2008 by Source Type"))
print(ggp)
#Ques Part 1:
##Of the four types of sources indicated by the  (point, nonpoint, onroad, nonroad) variable, which of these four sources have seen decreases in emissions from 1999–2008 for Baltimore City?
#Answer Part -1
#The non-road, nonpoint, on-road source types have all seen decreased emissions overall from 1999-2008 in Baltimore City.
#Ques Part 2:
# Whihc has seen increase
## Answer
#POINT data has seen sligh increase from 2002 to 2005
png("plot3.png",width=480,height=480,units="px",bg="transparent")
ggp <- ggplot(baltimore_NEI,aes(factor(year),Emissions,fill=type)) +
geom_bar(stat="identity") +
theme_bw() + guides(fill=FALSE)+
facet_grid(.~type,scales = "free",space="free") +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Tons)")) +
labs(title=expression("PM"[2.5]*" Emissions, Baltimore City 1999-2008 by Source Type"))
dev.off()
png("plot3.png",width=480,height=480,units="px",bg="transparent")
ggp <- ggplot(baltimore_NEI,aes(factor(year),Emissions,fill=type)) +
geom_bar(stat="identity") +
theme_bw() + guides(fill=FALSE)+
facet_grid(.~type,scales = "free",space="free") +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Tons)")) +
labs(title=expression("PM"[2.5]*" Emissions, Baltimore City 1999-2008 by Source Type"))
print(ggp)
dev.off()
library(ggplot2)
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
#Question 3
#Of the four types of sources indicated by the  (point, nonpoint, onroad, nonroad) variable, which of these four sources have seen decreases in emissions from 1999–2008 for Baltimore City? Which have seen increases in emissions from 1999–2008? Use the ggplot2 plotting system to make a plot answer this question.
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
#Question 4
#Across the United States, how have emissions from coal combustion-related sources changed from 1999–2008?
combustion_related <- grepl("comb", SCC_data$SCC.Level.One, ignore.case=TRUE)
coal_related <- grepl("coal", SCC_data$SCC.Level.Four, ignore.case=TRUE)
coal_combustion <- (combustion_related & coal_related)
combustion_SCC <- SCC_data[coal_combustion,]$SCC
combustion_NEI <- NEI_data[NEI_data$SCC %in% combustion_SCC,]
png("plot4.png",width=480,height=480,units="px",bg="transparent")
ggp <- ggplot(combustion_NEI,aes(factor(year),Emissions/10^5)) +
geom_bar(stat="identity",fill="grey",width=0.75) +
theme_bw() +  guides(fill=FALSE) +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (10^5 Tons)")) +
labs(title=expression("PM"[2.5]*" Coal Combustion Source Emissions Across US from 1999-2008"))
print(ggp)
dev.off()
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
## Question 5
##How have emissions from motor vehicle sources changed from 1999–2008 in Baltimore City?
vehicles <- grepl("vehicle", SCC_data$SCC.Level.Two, ignore.case=TRUE)
vehicles_SCC <- SCC_data[vehicles,]$SCC
vehicles_NEI <- NEI_data[NEI_data$SCC %in% vehicles_SCC,]
baltimore_vehicles_NEI <- vehicles_NEI[vehicles_NEI$fips==24510,]
png("plot5.png",width=480,height=480,units="px",bg="transparent")
ggp <- ggplot(baltimore_vehicles_NEI,aes(factor(year),Emissions)) +
geom_bar(stat="identity",fill="grey",width=0.75) +
theme_bw() +  guides(fill=FALSE) +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (10^5 Tons)")) +
labs(title=expression("PM"[2.5]*" Motor Vehicle Source Emissions in Baltimore from 1999-2008"))
print(ggp)
dev.off()
setwd('/Users/sougatabhattacharya/myspaces/course/john-hopkins/assignments/eda')
NEI_data <- readRDS('exdata_data_NEI_data/summarySCC_PM25.rds')
SCC_data <- readRDS("exdata_data_NEI_data/Source_Classification_Code.rds")
#Question 6
#Compare emissions from motor vehicle sources in Baltimore City with emissions from motor vehicle sources in Los Angeles County, California (\color{red}{\verb|fips == "06037"|}fips=="06037"). Which city has seen greater changes over time in motor vehicle emissions?
vehicles <- grepl("vehicle", SCC_data$SCC.Level.Two, ignore.case=TRUE)
vehicles_SCC <- SCC_data[vehicles,]$SCC
vehicles_NEI <- NEI_data[NEI_data$SCC %in% vehicles_SCC,]
vehicles_baltimore_NEI <- vehicles_NEI[vehicles_NEI$fips == 24510,]
vehicles_baltimore_NEI$city <- "Baltimore City"
vehicles_LA_NEI <- vehicles_NEI[vehicles_NEI$fips=="06037",]
vehicles_LA_NEI$city <- "Los Angeles County"
both_NEI <- rbind(vehicles_baltimore_NEI,vehicles_LA_NEI)
png("plot6.png",width=480,height=480,units="px",bg="transparent")
ggp <- ggplot(both_NEI, aes(x=factor(year), y=Emissions, fill=city)) +
geom_bar(aes(fill=year),stat="identity") +
facet_grid(scales="free", space="free", .~city) +
guides(fill=FALSE) + theme_bw() +
labs(x="year", y=expression("Total PM"[2.5]*" Emission (Kilo-Tons)")) +
labs(title=expression("PM"[2.5]*" Motor Vehicle Source Emissions in Baltimore & LA, 1999-2008"))
print(ggp)
dev.off()
#Los Angeles(LA) County has seen the greatest changes over time in motor vehicle emissions.
